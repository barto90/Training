<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Securing Database Access for Azure Front End Services - Architecture</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            color: #333;
            background: linear-gradient(135deg, #0078d4 0%, #005a9e 100%);
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        h1 {
            background: linear-gradient(135deg, #0078d4 0%, #005a9e 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 32px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 3px solid #0078d4;
            text-align: center;
        }
        .architecture {
            width: 100%;
            height: 450px;
            border: 1px solid #ddd;
            border-radius: 12px;
            margin: 20px 0;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .flow-container {
            display: flex;
            justify-content: space-around;
            align-items: center;
            width: 100%;
            padding: 40px;
        }
        .flow-item {
            text-align: center;
            flex: 1;
            margin: 0 10px;
        }
        .flow-icon {
            font-size: 60px;
            margin-bottom: 10px;
            display: block;
        }
        .flow-arrow {
            font-size: 30px;
            color: #0078d4;
            margin: 0 20px;
        }
        .resources {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }
        .resource {
            border: 1px solid #ddd;
            border-radius: 12px;
            padding: 25px;
            background: linear-gradient(135deg, #0078d4 0%, #005a9e 100%);
            color: white;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 120, 212, 0.3);
        }
        .resource:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 25px rgba(0, 120, 212, 0.4);
        }
        .resource h3 {
            margin-top: 0;
            color: #fff;
            font-size: 22px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .resource-icon {
            font-size: 28px;
        }
        .config {
            background-color: rgba(255,255,255,0.15);
            padding: 18px;
            border-radius: 8px;
            margin-top: 18px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            backdrop-filter: blur(10px);
        }
        .config div {
            margin: 6px 0;
        }
        .security-section {
            margin-top: 30px;
            background: linear-gradient(135deg, #28a745 0%, #1e7e34 100%);
            color: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
        }
        .security-section h3 {
            margin-top: 0;
            font-size: 24px;
        }
        .security-section ul {
            columns: 2;
            column-gap: 40px;
        }
        .managed-identity-info {
            background: linear-gradient(135deg, #6f42c1 0%, #563d7c 100%);
            color: white;
            padding: 30px;
            border-radius: 12px;
            margin-top: 30px;
            box-shadow: 0 4px 15px rgba(111, 66, 193, 0.3);
        }
        .managed-identity-info h3 {
            margin-top: 0;
            font-size: 24px;
        }
        .identity-flow {
            background-color: rgba(255,255,255,0.15);
            padding: 20px;
            border-radius: 8px;
            margin-top: 18px;
            backdrop-filter: blur(10px);
        }
        .identity-step {
            margin: 12px 0;
            padding: 10px;
            background-color: rgba(255,255,255,0.1);
            border-radius: 6px;
            border-left: 3px solid #ffd700;
        }
        .database-features {
            background: linear-gradient(135deg, #17a2b8 0%, #117a8b 100%);
            color: white;
            padding: 30px;
            border-radius: 12px;
            margin-top: 30px;
            box-shadow: 0 4px 15px rgba(23, 162, 184, 0.3);
        }
        .database-features h3 {
            margin-top: 0;
            font-size: 24px;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }
        .stat-item {
            background-color: rgba(255,255,255,0.15);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            backdrop-filter: blur(10px);
        }
        .stat-number {
            font-size: 28px;
            font-weight: bold;
            display: block;
        }
        .powershell-info {
            background: linear-gradient(135deg, #e91e63 0%, #c2185b 100%);
            color: white;
            padding: 30px;
            border-radius: 12px;
            margin-top: 30px;
            box-shadow: 0 4px 15px rgba(233, 30, 99, 0.3);
        }
        .powershell-info h3 {
            margin-top: 0;
            font-size: 24px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîí Securing Database Access for Azure Front End Services</h1>
        
        <!-- Architecture Flow -->
        <div class="architecture">
            <h2>üèóÔ∏è Architecture Overview</h2>
            <p style="font-size: 18px; color: #666; margin-bottom: 30px;">Azure Function ‚Üí Managed Identity ‚Üí Azure SQL Database</p>
            <div class="flow-container">
                <div class="flow-item">
                    <span class="flow-icon">‚ö°</span>
                    <div><strong>Azure Function</strong></div>
                    <div style="font-size: 14px; color: #666;">PowerShell Runtime</div>
                </div>
                <div class="flow-arrow">‚û°Ô∏è</div>
                <div class="flow-item">
                    <span class="flow-icon">üîë</span>
                    <div><strong>Managed Identity</strong></div>
                    <div style="font-size: 14px; color: #666;">Azure AD Auth</div>
                </div>
                <div class="flow-arrow">‚û°Ô∏è</div>
                <div class="flow-item">
                    <span class="flow-icon">üóÑÔ∏è</span>
                    <div><strong>Azure SQL</strong></div>
                    <div style="font-size: 14px; color: #666;">Secure Database</div>
                </div>
                <div class="flow-arrow">‚û°Ô∏è</div>
                <div class="flow-item">
                    <span class="flow-icon">‚úÖ</span>
                    <div><strong>Data Access</strong></div>
                    <div style="font-size: 14px; color: #666;">Read & Write</div>
                </div>
            </div>
        </div>

        <div class="resources">
            <div class="resource">
                <h3><span class="resource-icon">üóÑÔ∏è</span>Azure SQL Server</h3>
                <p>Managed relational database service with enterprise-grade security and performance.</p>
                <div class="config">
                    <div><strong>Version:</strong> SQL Server 2019</div>
                    <div><strong>TLS:</strong> 1.2 (Minimum)</div>
                    <div><strong>Authentication:</strong> SQL + Azure AD</div>
                    <div><strong>Firewall:</strong> Azure Services Enabled</div>
                </div>
            </div>

            <div class="resource">
                <h3><span class="resource-icon">üíæ</span>SQL Database</h3>
                <p>Scalable database with automatic backups and geo-replication capabilities.</p>
                <div class="config">
                    <div><strong>Tier:</strong> Basic/Standard</div>
                    <div><strong>Collation:</strong> SQL_Latin1_General_CP1_CI_AS</div>
                    <div><strong>Max Size:</strong> 2 GB</div>
                    <div><strong>Backup:</strong> Automatic</div>
                </div>
            </div>

            <div class="resource">
                <h3><span class="resource-icon">‚ö°</span>Azure Functions</h3>
                <p>Serverless compute service running PowerShell runtime with system-assigned managed identity.</p>
                <div class="config">
                    <div><strong>Runtime:</strong> PowerShell 7.4</div>
                    <div><strong>Identity:</strong> System Assigned</div>
                    <div><strong>Plan:</strong> Consumption (Y1)</div>
                    <div><strong>Architecture:</strong> 64-bit</div>
                </div>
            </div>

            <div class="resource">
                <h3><span class="resource-icon">üíæ</span>Storage Account</h3>
                <p>Backend storage for Azure Functions runtime and content management.</p>
                <div class="config">
                    <div><strong>Type:</strong> Standard_LRS</div>
                    <div><strong>Security:</strong> HTTPS Only</div>
                    <div><strong>Features:</strong> Secure Storage</div>
                    <div><strong>Access:</strong> Function Runtime</div>
                </div>
            </div>

            <div class="resource">
                <h3><span class="resource-icon">üìä</span>Application Insights</h3>
                <p>Monitoring and telemetry for function execution and performance metrics.</p>
                <div class="config">
                    <div><strong>Type:</strong> Web Application</div>
                    <div><strong>Features:</strong> Logs, Metrics</div>
                    <div><strong>Tracing:</strong> Enabled</div>
                    <div><strong>Retention:</strong> 90 days</div>
                </div>
            </div>
        </div>

        <div class="security-section">
            <h3>üîí Security Features</h3>
            <ul>
                <li><strong>Managed Identity:</strong> No credentials stored in code</li>
                <li><strong>Azure AD Authentication:</strong> Token-based database access</li>
                <li><strong>TLS Encryption:</strong> All connections use TLS 1.2+</li>
                <li><strong>Firewall Protection:</strong> SQL Server firewall enabled</li>
                <li><strong>HTTPS Only:</strong> All HTTP traffic redirected</li>
                <li><strong>Role-Based Access:</strong> Granular database permissions</li>
                <li><strong>Audit Logging:</strong> All database access logged</li>
                <li><strong>No Connection Strings:</strong> Token-based authentication</li>
            </ul>
        </div>

        <div class="managed-identity-info">
            <h3>üîë Managed Identity Authentication Flow</h3>
            <div class="identity-flow">
                <div class="identity-step">
                    <strong>1. Function Starts:</strong> Azure Function activated with system-assigned managed identity
                </div>
                <div class="identity-step">
                    <strong>2. Token Request:</strong> Function requests Azure AD access token for SQL Database
                </div>
                <div class="identity-step">
                    <strong>3. Azure AD Validation:</strong> Azure AD validates the managed identity and issues token
                </div>
                <div class="identity-step">
                    <strong>4. Database Connection:</strong> Function connects to SQL Database using Azure AD token
                </div>
                <div class="identity-step">
                    <strong>5. Permission Check:</strong> SQL Server verifies token and grants database access
                </div>
                <div class="identity-step">
                    <strong>6. Data Operations:</strong> Function executes read/write operations securely
                </div>
            </div>
        </div>

        <div class="database-features">
            <h3>üóÑÔ∏è Azure SQL Database Capabilities</h3>
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-number">99.99%</span>
                    <div>Availability SLA</div>
                </div>
                <div class="stat-item">
                    <span class="stat-number">35 Days</span>
                    <div>Point-in-Time Restore</div>
                </div>
                <div class="stat-item">
                    <span class="stat-number">üîê</span>
                    <div>Transparent Data Encryption</div>
                </div>
                <div class="stat-item">
                    <span class="stat-number">‚ö°</span>
                    <div>Automatic Tuning</div>
                </div>
            </div>
        </div>

        <div class="powershell-info">
            <h3>üíª PowerShell Function Benefits</h3>
            <ul>
                <li><strong>Native Azure Integration:</strong> Built-in cmdlets for Azure services</li>
                <li><strong>SqlServer Module:</strong> Full T-SQL query support</li>
                <li><strong>Error Handling:</strong> Comprehensive try-catch-finally support</li>
                <li><strong>Logging:</strong> Detailed execution logging to Application Insights</li>
                <li><strong>Token Authentication:</strong> Automatic managed identity token handling</li>
                <li><strong>Cost Effective:</strong> Pay-per-execution consumption model</li>
            </ul>
        </div>
    </div>
</body>
</html>

